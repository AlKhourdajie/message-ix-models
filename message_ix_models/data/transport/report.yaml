# Reporting configuration for MESSAGEix-Transport
#
# This file only contains a subset of computations, mostly related to
# IAMC-format tables, that can be specified in this static YAML format. For the
# rest, see message_data.model.transport.report.

general:
# Configuration for :func:`check`. Adds a single key, 'transport check', that
# depends on others and returns a :class:`pandas.Series` of :class:`bool`.
- comp: transport_check
  key: transport check
  inputs: [ scenario, ACT:nl-t-yv-va-m-h ]

# Exogenous data
- comp: distance_ldv
  key: distance:nl-driver_type:ldv
  inputs: [ config ]

- comp: distance_nonldv
  key: distance:nl:non-ldv
  inputs: [ config ]

# Demand per capita
- comp: ratio
  key: demand:n-c-y:capita
  inputs: [ demand:n-c-y, population:n-y ]

# Vehicle stocks
- comp: ratio
  key: stock:nl-t-ya:non-ldv
  inputs: [ CAP:nl-t-ya:non-ldv, distance:nl:non-ldv ]
  sums: true

- comp: ratio
  key: stock:nl-t-ya-driver_type:ldv
  inputs: [ CAP:nl-t-ya:ldv, distance:nl-driver_type:ldv ]
  sums: true

- key: transport file path
  comp: make_output_path
  inputs: [ config ]
  args: { name: transport.csv }

- key: transport iamc
  comp: concat
  inputs:
  - transport iamc 0
  - transport iamc 1
  - transport iamc 2
  # - transport iamc 3

- key: transport iamc file
  comp: write_report
  inputs: [ transport iamc, transport file path ]

- key: transport iamc store
  comp: store_ts
  inputs: [ scenario, transport iamc ]

# NB these are currently tailored to produce the variable names expected for the
#    NGFS project
iamc:
- variable: transport iamc 0
  base: stock:nl-t-ya:ldv
  var: [ "Transport|Stock|Road|Passenger|LDV", t ]
- variable: transport iamc 1
  base: in:nl-t-ya:ldv
  var: [ "Final Energy|Transportation|Road|Passenger|LDV", t ]
- variable: transport iamc 2
  base: in:nl-t-ya:non-ldv
  var: [ "Final Energy|Transportation|", t ]
- variable: transport iamc 3
  # Auto-sum over dimensions yv, m, h
  base: emi:nl-t-ya
  var: [ "Emissions|CO2|Energy|Demand|Transportation|", t ]
